(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{381:function(s,a,e){"use strict";e.r(a);var t=e(25),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"vue环境配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue环境配置"}},[s._v("#")]),s._v(" vue环境配置")]),s._v(" "),e("h2",{attrs:{id:"vue-cli2-0环境配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli2-0环境配置"}},[s._v("#")]),s._v(" vue-cli2.0环境配置")]),s._v(" "),e("h3",{attrs:{id:"_1-安装cross-env"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装cross-env"}},[s._v("#")]),s._v(" 1.安装cross-env")]),s._v(" "),e("ul",[e("li",[s._v("npm i cross-env --save-dev")])]),s._v(" "),e("h3",{attrs:{id:"_2-package-json-修改打包命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-package-json-修改打包命令"}},[s._v("#")]),s._v(" 2.package.json 修改打包命令")]),s._v(" "),e("ul",[e("li",[s._v('"build-uat": "cross-env NODE_ENV=uat ENV_CONFIG=prod node build/build.js"\nNODE_ENV为不同域名环境  ENV_CONFIG为打包环境')])]),s._v(" "),e("h3",{attrs:{id:"_3-config中添加环境test-env-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-config中添加环境test-env-js"}},[s._v("#")]),s._v(" 3.config中添加环境test.env.js")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("module.exports = {\n NODE_ENV: '\"uat\"',\n ENV_CONFIG: '\"prod\"',\n API_ADDRESS: '\"https://testxxx.com\"',\n}\n")])])]),e("h3",{attrs:{id:"_4-修改config中dev-env-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-修改config中dev-env-js"}},[s._v("#")]),s._v(" 4.修改config中dev.env.js")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" const merge = require('webpack-merge')\nconst testEnv = require('./test.env')\nmodule.exports = merge(testEnv, {\n NODE_ENV: '\"development\"',\n ENV_CONFIG: '\"dev\"',\n API_ADDRESS: '\"\"',\n})\nconst testEnv = require('./test.env')\n")])])]),e("h3",{attrs:{id:"_5-修改build中utils-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改build中utils-js"}},[s._v("#")]),s._v(" 5.修改build中utils.js")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("exports.assetsPath = function (_path) {\n const assetsSubDirectory = process.env.ENV_CONFIG === 'prod'\n   ? config.build.assetsSubDirectory\n   : config.dev.assetsSubDirectory\n return path.posix.join(assetsSubDirectory, _path)\n}\n")])])]),e("h3",{attrs:{id:"_6-修改build中webpack-base-conf-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-修改build中webpack-base-conf-js"}},[s._v("#")]),s._v(" 6.修改build中webpack.base.conf.js")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" output: {\n   path: config.build.assetsRoot,\n   filename: '[name].js',\n   publicPath: process.env.ENV_CONFIG === 'prod'\n     ? config.build.assetsPublicPath\n     : config.dev.assetsPublicPath\n }\n")])])]),e("h3",{attrs:{id:"_7-修改build中webpack-prod-conf-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-修改build中webpack-prod-conf-js"}},[s._v("#")]),s._v(" 7.修改build中webpack.prod.conf.js")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const env = require('../config/'+process.env.NODE_ENV+'.env')\n")])])]),e("h2",{attrs:{id:"vue-cli3-0环境配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli3-0环境配置"}},[s._v("#")]),s._v(" vue-cli3.0环境配置")]),s._v(" "),e("h3",{attrs:{id:"_1-根目录下创建环境文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-根目录下创建环境文件"}},[s._v("#")]),s._v(" 1.根目录下创建环境文件")]),s._v(" "),e("ul",[e("li",[s._v("env.uat")])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("NODE_ENV = 'production'\nVUE_APP_FLAG='uat'\n")])])]),e("ul",[e("li",[s._v("env.production")])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("NODE_ENV = 'production'\nVUE_APP_FLAG='production'\n")])])]),e("h3",{attrs:{id:"_2-package-json里scripts下配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-package-json里scripts下配置"}},[s._v("#")]),s._v(" 2.package.json里scripts下配置")]),s._v(" "),e("ul",[e("li",[s._v('启动配置："uat": "vue-cli-service serve --mode uat",')]),s._v(" "),e("li",[s._v('打包配置："build:uat": "vue-cli-service build --mode uat"')])]),s._v(" "),e("h3",{attrs:{id:"_3-打包域名配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-打包域名配置"}},[s._v("#")]),s._v(" 3.打包域名配置")]),s._v(" "),e("p",[s._v("switch (process.env.VUE_APP_FLAG) {\ncase 'uat':\napiDomain = ''\nbreak\ncase 'dev':\napiDomain = ''\nbreak\ncase 'prd':\napiDomain = ''\nbreak\n}")])])}),[],!1,null,null,null);a.default=r.exports}}]);